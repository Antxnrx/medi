<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Backend Connection Test</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; }
    .status { padding: 10px; border-radius: 4px; margin-top: 10px; }
    .active { background-color: #e6f4ea; color: #137333; }
    .error { background-color: #fce8e6; color: #c5221f; }
    button { 
      background-color: #1a73e8; 
      color: white; 
      border: none; 
      padding: 8px 16px; 
      border-radius: 4px; 
      cursor: pointer; 
      margin-top: 10px; 
    }
  </style>
</head>
<body>
  <h1>MedShield AI Backend Connection Test</h1>
  <p>This page tests the connection to the MedShield AI backend server.</p>
  
  <div id="status">Checking backend status...</div>
  <button id="checkButton">Check Again</button>

  <script>
    const statusDiv = document.getElementById('status');
    const checkButton = document.getElementById('checkButton');
    
    // Function to check backend status
    function checkBackendStatus() {
      statusDiv.className = '';
      statusDiv.textContent = 'Checking backend status...';
      
      // Try direct fetch to the backend server
      fetch('http://localhost:5001/scan', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ text: 'Test medical claim' }),
        cache: 'no-store' // Don't use cached responses
      })
      .then(response => {
        if (response.ok) {
          statusDiv.className = 'status active';
          statusDiv.textContent = 'Backend status: Running ✅';
        } else {
          statusDiv.className = 'status error';
          statusDiv.textContent = `Backend status: Error - HTTP ${response.status} ❌`;
        }
      })
      .catch(error => {
        statusDiv.className = 'status error';
        statusDiv.textContent = `Backend status: Not available. Backend server is not responding ❌ (${error.message})`;
      });
    }
    
    // Check status when page loads
    checkBackendStatus();
    
    // Add event listener for check button
    checkButton.addEventListener('click', checkBackendStatus);
  </script>
</body>
</html>